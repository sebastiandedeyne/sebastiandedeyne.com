[build]
command = """
hugo --minify --buildFuture=$BUILD_FUTURE --baseURL=$(echo $PRODUCTION_URL || echo $DEPLOY_URL)
npm i -g @torchlight-api/torchlight-cli
npx torchlight
"""
publish = "public"

[build.environment]
HUGO_VERSION = "0.110.0"
HUGO_ENV = "production"

[context.branch-deploy]
command = "hugo --minify --buildFuture"

[[redirects]]
from = "/posts"
to = "/"

[[redirects]]
from = "/2016/:post"
to = "/:post"

[[redirects]]
from = "/2017/:post"
to = "/:post"

[[redirects]]
from = "/2018/:post"
to = "/:post"

[[redirects]]
from = "/posts/2016/:post"
to = "/:post"

[[redirects]]
from = "/posts/2017/:post"
to = "/:post"

[[redirects]]
from = "/posts/2018/:post"
to = "/:post"

[[redirects]]
from = "/feed"
to = "/index.xml"

[[redirects]]
from = "/feed/articles"
to = "/type/article/index.xml"

[[redirects]]
from = "/articles/index.xml"
to = "/type/article/index.xml"

[[redirects]]
from = "/semver-deps"
to = "/composer-semver-and-underlying-dependency-changes"

[[redirects]]
from = "/javascript-framework-diet/:post"
to = "/javascript-framework-diet-:post"

[[redirects]]
from = "/vite-with-laravel/:post"
to = "/vite-with-laravel-:post"

[[redirects]]
from = "/unix-things/:post"
to = "/:post"

[[redirects]]
from = "/event-sourcing/:post"
to = "/:post"
